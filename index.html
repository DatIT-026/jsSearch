<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cổng thông tin Đào tạo - Tăng Thiết Giáp</title>
    <link rel="stylesheet" href="style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Times+New+Roman:wght@700&display=swap"
        rel="stylesheet">
</head>

<body>

    <header class="site-header">
        <div class="header-content">
            <div class="logo-box">
                <img src="img/logo_1.webp" alt="Logo 1" class="header-logo" onerror="this.style.display='none'">
                <img src="img/logo_2.webp" alt="Logo 2" class="header-logo" onerror="this.style.display='none'">
            </div>

            <div class="header-text">
                <div class="top-line">CỔNG THÔNG TIN ĐIỆN TỬ</div>
                <h1 class="school-name">TRƯỜNG SĨ QUAN TĂNG THIẾT GIÁP</h1>
                <div class="address">Km6 - Tam Dương - Phú Thọ</div>
                <div class="slogan">"Chất lượng đào tạo của Nhà trường là khả năng sẵn sàng chiến đấu của đơn vị"</div>
            </div>

            <div class="logo-box">
                <img src="img/logo_3.webp" alt="Logo 3" class="header-logo" onerror="this.style.display='none'">
                <img src="img/logo_4.webp" alt="Logo 4" class="header-logo" onerror="this.style.display='none'">
            </div>
        </div>
    </header>

    <nav class="main-nav">
        <div class="menu-toggle" onclick="toggleMenu()">
            <span></span>
            <span></span>
            <span></span>
        </div>

        <ul class="nav-list" id="navMenu">
            <li><a href="#" id="nav-home" class="active" onclick="goHome()">Trang chủ</a></li>
            <li><a href="#" id="nav-leadership" onclick="showLeadershipView()">Thủ trưởng, BGH</a></li>
            <li><a href="#" id="nav-office" onclick="showOfficeView()">Cơ quan</a></li>
            <li><a href="#" id="nav-teacher" onclick="showTeacherView()">Khối giáo viên</a></li>
            <li><a href="#" id="nav-grade" onclick="showGradeView(event)">Tính Điểm</a></li>
            <li><a href="#" id="nav-ranking" onclick="showRankingView()">Xếp Hạng</a></li>

            <li class="dropdown">
                <a href="#" id="nav-battalion" class="dropdown-toggle" onclick="dropDown()">
                    Tiểu đoàn
                    <span class="dropdown-arrow">▼</span>
                </a>
                <ul class="dropdown-content">
                    <li><a href="#" onclick="showBattalion('d1')">Tiểu đoàn 1</a></li>
                    <li><a href="#" onclick="showBattalion('d2')">Tiểu đoàn 2</a></li>
                    <li><a href="#" onclick="showBattalion('d61')">Tiểu đoàn 61</a></li>
                    <li><a href="#" onclick="showBattalion('d7')">Tiểu đoàn 7</a></li>
                </ul>
            </li>
        </ul>
    </nav>

    <script>
        function dropDown() {
            document.getElementById("myDropdown").classList.toggle("show");
        }

        window.onclick = function (event) {
            if (event.target.closest('.dropdown-toggle') || event.target.matches('.dropbtn')) {
                return;
            }

            if (event.target.closest('.nav-list a')) {
                return;
            }

            document.querySelectorAll('.dropdown').forEach(d => {
                d.classList.remove('active');
            });
        }
    </script>

    <main class="main-container">
        <div id="home-view" class="view-section">
            <div class="search-section">
                <h2 class="section-title">TRA CỨU HỒ SƠ HỌC VIÊN</h2>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Nhập họ tên học viên cần tìm..."
                        autocomplete="off">
                    <button id="searchBtn">Tìm kiếm</button>
                </div>
            </div>
            <div id="searchResultContainer" class="table-responsive"></div>
        </div>

        <div id="battalion-view" class="view-section" style="display: none;">
            <div class="nav-actions">
                <button onclick="goHome()" class="btn-back">← Về Trang chủ</button>
            </div>
            <h2 class="view-title">TIỂU ĐOÀN 1 - DANH SÁCH ĐƠN VỊ</h2>
            <div class="unit-grid">
                <div class="unit-card disabled">
                    <h3>Đại Đội 1</h3><small>(Chưa có dữ liệu)</small>
                </div>
                <div class="unit-card disabled">
                    <h3>Đại Đội 2</h3><small>(Chưa có dữ liệu)</small>
                </div>
                <div class="unit-card disabled">
                    <h3>Đại Đội 3</h3><small>(Chưa có dữ liệu)</small>
                </div>
                <div class="unit-card active" onclick="showCompanyList('c4')">
                    <h3>Đại Đội 4</h3>
                    <p>Xem quân số</p>
                </div>
            </div>
        </div>

        <div id="company-list-view" class="view-section" style="display: none;">
            <div class="nav-actions">
                <button onclick="showBattalion('d1')" class="btn-back">← Về Tiểu đoàn</button>
                <div class="record-count" id="total-count">Tổng: 0</div>
            </div>
            <h2 class="view-title text-left">DANH SÁCH QUÂN SỐ - Đại Đội 4</h2>
            <div id="tableContainer" class="table-responsive"></div>
        </div>

        <section id="leadership-view" class="view-section" style="display: none;">
            <div class="section-header">
                <h2 class="view-title">THỦ TRƯỞNG - BAN GIÁM HIỆU</h2>
            </div>

            <div class="content-box">
                <div id="leadership-list" class="leader-grid"></div>
            </div>
        </section>

        <section id="office-view" class="view-section" style="display: none;">
            <div class="section-header">
                <h2 class="view-title">KHỐI CƠ QUAN</h2>
            </div>

            <div class="content-box">
                <div id="office-container" class="office-wrapper"></div>
            </div>
        </section>

        <section id="teacher-view" class="view-section" style="display: none;">
            <div class="section-header">
                <h2 class="view-title">DANH SÁCH CÁC KHOA GIÁO VIÊN</h2>
            </div>

            <div class="content-box">
                <div id="department-list" class="department-grid"></div>
            </div>
        </section>

        <section id="ranking-view" class="view-section" style="display: none;">
            <div class="section-header">
                <h2 class="view-title">BẢNG XẾP HẠNG THI ĐUA</h2>
            </div>

            <div class="content-box">
                <div class="ranking-stats">
                    <div class="stat-card gold">
                        <h3>CSTĐ</h3>
                        <span id="count-cstd">0</span>
                    </div>
                    <div class="stat-card green">
                        <h3>CSTT</h3>
                        <span id="count-cstt">0</span>
                    </div>
                    <div class="stat-card red">
                        <h3>Vi Phạm</h3>
                        <span id="count-warn">0</span>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="rank-table">
                        <thead>
                            <tr>
                                <th style="width: 50px;">Hạng</th>
                                <th>Họ và tên</th>
                                <th class="text-center">Điểm TB</th>
                                <th class="text-center">Vi Phạm</th>
                                <th class="text-center">Danh Hiệu</th>
                            </tr>
                        </thead>
                        <tbody id="ranking-body">
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <div id="grade-view" class="view-section" style="display: none;">
            <div class="nav-actions">
                <button onclick="goHome()" class="btn-back">← Về Trang chủ</button>
            </div>
            <h2 class="view-title">CÔNG CỤ TÍNH ĐIỂM HỌC TẬP</h2>

            <div class="grade-container">
                <div class="grade-card">
                    <h3 class="card-header">1. TÍNH ĐIỂM MÔN HỌC</h3>
                    <div class="form-group"><label>Thường xuyên (10%):</label><input type="number" id="s10" step="0.1">
                    </div>
                    <div class="form-group"><label>Hết phân (20%):</label><input type="number" id="s20" step="0.1">
                    </div>
                    <div class="form-group"><label>Hết môn (70%):</label><input type="number" id="s70" step="0.1"></div>
                    <button onclick="calcSubjectScore()" class="action-btn">Tính kết quả</button>
                    <div id="subjectResult" class="result-box" style="display:none">KẾT QUẢ: <span
                            id="finalScore">0.0</span></div>
                </div>

                <div class="grade-card full-width">
                    <h3 class="card-header">2. TÍNH ĐIỂM TRUNG BÌNH (GPA)</h3>
                    <div class="add-subject-row">
                        <select id="courseSelect" class="form-select">
                            <option value="">-- Chọn môn học --</option>
                        </select>
                        <div class="form-group1">
                            <input type="number" id="gpaScore" placeholder="Điểm TK" style="width: 150px;">
                        </div>
                        <button onclick="addToGPATable()" class="add-btn">Thêm</button>
                    </div>
                    <div class="table-responsive">
                        <table class="military-table" id="gpaTable">
                            <thead>
                                <tr>
                                    <th>Môn học</th>
                                    <th class="text-center">Mã môn</th>
                                    <th class="text-center">Số tín</th>
                                    <th class="text-center">Điểm</th>
                                    <th class="text-center"> </th>
                                </tr>
                            </thead>
                            <tbody id="gpaListBody"></tbody>
                        </table>
                    </div>
                    <div class="gpa-footer">
                        <button onclick="calcGPA()" class="action-btn primary">Tính Trung Bình</button>
                        <div id="gpaResult" class="result-box" style="display:none; margin-top:10px;">GPA: <span
                                id="gpaValue" style="color:#b71c1c; font-size:21px">0.00</span></div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <footer>
        <p>© 2025 FireHelper Team. All Rights Reserved.</p>
    </footer>

    <div id="studentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">THÔNG TIN CHI TIẾT</h3>
                <span class="close-btn" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script src="script.js"></script>
</body>

</html>